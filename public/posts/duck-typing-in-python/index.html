<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <meta name="color-scheme" content="light dark">

    

    <meta name="author" content="KSHITIJ SARAOGI">
    <meta name="description" content="What is Duck Typing?    Python is a dynamic language which is strongly typed. Dynamic binding is the capability to use an instance without regard for its type. It is handled entirely through a simple attribute lookup process. Whenever an attribute is accessed as object.attribute:
 attribute is located by searching within the instance itself. This yields a positive result when the attribute being searched for is an instance variable or method.">
    <meta name="keywords" content="blog,developer,personal,minimal,software,engineer,mathematics">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Duck Typing in Python"/>
<meta name="twitter:description" content="What is Duck Typing?    Python is a dynamic language which is strongly typed. Dynamic binding is the capability to use an instance without regard for its type. It is handled entirely through a simple attribute lookup process. Whenever an attribute is accessed as object.attribute:
 attribute is located by searching within the instance itself. This yields a positive result when the attribute being searched for is an instance variable or method."/>

    <meta property="og:title" content="Duck Typing in Python" />
<meta property="og:description" content="What is Duck Typing?    Python is a dynamic language which is strongly typed. Dynamic binding is the capability to use an instance without regard for its type. It is handled entirely through a simple attribute lookup process. Whenever an attribute is accessed as object.attribute:
 attribute is located by searching within the instance itself. This yields a positive result when the attribute being searched for is an instance variable or method." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kshitij10496.github.io/posts/duck-typing-in-python/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-03T00:00:00+05:30" />
<meta property="article:modified_time" content="2021-09-04T14:16:29+02:00" />



    <title>
  Duck Typing in Python · kxsh
</title>

    
      <link rel="canonical" href="https://kshitij10496.github.io/posts/duck-typing-in-python/">
    

    <link rel="preload" href="https://kshitij10496.github.io/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="https://kshitij10496.github.io/css/coder.min.708686f8ab8176e91d44fcbe488a0fe0333b94f405cf18a52383d67ba22f0ccb.css" integrity="sha256-cIaG&#43;KuBdukdRPy&#43;SIoP4DM7lPQFzxilI4PWe6IvDMs=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://kshitij10496.github.io/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css" integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="https://kshitij10496.github.io/images/favicon_32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://kshitij10496.github.io/images/favicon_16.ico" sizes="16x16">

    <link rel="apple-touch-icon" href="https://kshitij10496.github.io/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://kshitij10496.github.io/images/apple-touch-icon.png">

    
      <script defer src="https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js"
        integrity="sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b" crossorigin="anonymous"></script>
    

    <meta name="generator" content="Hugo 0.88.0" />
  </head>

  
  
    
  
  <body class="preload-transitions colorscheme-auto"
        onload=" twemoji.parse(document.body); "
  >
    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://kshitij10496.github.io/">
      kxsh
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://kshitij10496.github.io/about/">ABOUT</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://kshitij10496.github.io/posts/">POSTS</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://kshitij10496.github.io/now/">NOW</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://drive.google.com/file/d/1-PqZNNRAuCvtquXWbgvBFEyrTRDwesKV/view?usp=sharing">RÉSUMÉ</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://kshitij10496.github.io/index.xml">RSS</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://kshitij10496.github.io/posts/duck-typing-in-python/">
              Duck Typing in Python
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime='2017-12-03T00:00:00&#43;05:30'>
                December 3, 2017
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa fa-folder" aria-hidden="true"></i>
    <a href="https://kshitij10496.github.io/categories/software/">Software</a></div>

          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="https://kshitij10496.github.io/tags/python/">Python</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="https://kshitij10496.github.io/tags/oop/">OOP</a>
    </span></div>

        </div>
      </header>

      <div>
        
        <h2 id="what-is-duck-typing">
  What is Duck Typing?
  <a class="heading-link" href="#what-is-duck-typing">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Python is a dynamic language which is strongly typed.
Dynamic binding is the capability to use an instance without regard for its type. It is handled entirely through a simple attribute lookup process. Whenever an attribute is accessed as <code>object.attribute</code>:</p>
<ol>
<li><code>attribute</code> is located by searching within the instance itself. This yields a positive result when the <code>attribute</code> being searched for is an instance variable or method.</li>
<li>If the instance does not have the required <code>attribute</code>, the instance&rsquo;s class definition is searched. All the class variables, class methods and static methods fall into this category.</li>
<li>If both these lookups do not return any result, the interpreter then proceeds to the base classes of the <code>object</code>(resolved by <a href="https://youtu.be/cuonAMJjHow">MRO</a>). The first match found is returned.</li>
</ol>
<p>The critical aspect of this binding process is it&rsquo;s <em>independence of the <strong>type</strong> of <code>object</code></em>. Thus, if you try a lookup such as <code>object.name</code>, it will work on any <code>object</code> that happens to have a <code>name</code> attribute independent of the class of the <code>object</code>. This behavior is colloquially referred to as <em><strong>duck typing</strong></em> in reference to the adage <em>“if it looks like, quacks like, and walks like a duck, then it is a duck.”</em></p>
<blockquote>
<p>The idea is that you don&rsquo;t need a type in order to invoke an existing method on an object - if a method is defined on it, you can invoke it.</p>
</blockquote>
<h2 id="where-should-i-use-it-in-my-code">
  Where should I use it in my code?
  <a class="heading-link" href="#where-should-i-use-it-in-my-code">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>More often than not we write programs, either deliberately or unwittingly that rely on duck typing.</p>
<p>While defining classes, the <em>magic</em> methods(or <em>dunder</em> methods) implement some sort of protocol supported by language. For example,</p>
<ul>
<li><code>__iter__</code> and <code>__next__</code> methods are used to implement the Iterator protocol. The instances of the class can now be used in <code>for</code> loops.</li>
<li>if we declare the <code>__len__</code> and <code>__getitem__</code> methods inside a class, it&rsquo;s instances are called <code>sequences</code>. All the objects of this class are now subscriptable by index (similar to <code>list</code>) as well as can be iterated over.</li>
</ul>
<h2 id="the-problem-of-tabulation">
  The Problem of Tabulation
  <a class="heading-link" href="#the-problem-of-tabulation">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Suppose we are asked to display a dictionary of country names and it&rsquo;s captial in a tabular format. Let us try to write a generic utility function which displays a given input mapping in a tabular form:</p>
<p><strong>Attempt 01</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">def tabulate_mapping(mapping, headers):
    &#39;&#39;&#39;Tabulates the input mapping as columns with given headers.
    
    &gt;&gt;&gt; mapping = {&#39;India&#39;: &#39;New Delhi&#39;,
    ...             &#39;USA&#39;: &#39;Washington&#39;,
    ...             &#39;England&#39;: &#39;London&#39;}
    &gt;&gt;&gt; headers = (&#39;Country&#39;, &#39;Captial&#39;)
    &gt;&gt;&gt; tabulate_mapping_01(mapping, headers)
            Country |        Capital |
    ----------------------------------
            England |         London |
              India |      New Delhi |
                USA |     Washington |
    &#39;&#39;&#39;
    heading = &#39;&#39;
    for header in headers:  ##### NOTE 1
        heading += &#39;{:&gt;15}&#39;.format(header) + &#39; |&#39;
    print(heading)
    print(&#39;-&#39;*len(heading))

    for k, v in mapping.items():  ##### NOTE 2
        print(&#39;{:&gt;15} |{:&gt;15} |&#39;.format(k, v))
</code></pre></div><p>The code should look pretty straighforward to any programmer who has written even a few lines of Python. However, there are two salient features about the code which do not strike us at the first sight. After some experimenting, you will figure out the following:</p>
<ol>
<li>Any iterable can be passed as <code>headers</code> i.e. <code>list</code>, <code>tuple</code>, user-defined sequences. Even unordered collections such as <code>dict</code>, <code>set</code> would also work.</li>
<li>Any object which implements an <code>items</code> method can be printed using <code>tabulate_mapping</code> function.</li>
</ol>
<p><strong>Duck Typing At Work!</strong></p>
<p>Let us create a class which extends the Python built-in <code>list</code> and implements a <code>items</code> method.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">class <span style="color:#50fa7b">MyList</span>(list):
    <span style="color:#f1fa8c">&#39;&#39;&#39; A user-defined collection data type which extends the built-in list.
</span><span style="color:#f1fa8c">    
</span><span style="color:#f1fa8c">    &gt;&gt;&gt; alphabet = MyList(*&#39;</span>ABC<span style="color:#f1fa8c">&#39;)
</span><span style="color:#f1fa8c">    &gt;&gt;&gt; print(alphabet)
</span><span style="color:#f1fa8c">    [&#39;</span>A<span style="color:#f1fa8c">&#39;, &#39;</span>B<span style="color:#f1fa8c">&#39;, &#39;</span>C<span style="color:#f1fa8c">&#39;]
</span><span style="color:#f1fa8c">    &gt;&gt;&gt; alphabet[1]
</span><span style="color:#f1fa8c">    &#39;</span>B<span style="color:#f1fa8c">&#39;
</span><span style="color:#f1fa8c">    &gt;&gt;&gt; for i, item in alphabet.items():
</span><span style="color:#f1fa8c">    ...     print(i, item)
</span><span style="color:#f1fa8c">    1 A
</span><span style="color:#f1fa8c">    2 B
</span><span style="color:#f1fa8c">    3 C
</span><span style="color:#f1fa8c">    &#39;&#39;&#39;</span>
    def <span style="color:#50fa7b">__init__</span>(self, <span style="color:#ff79c6">*</span>args):
        <span style="color:#50fa7b">super</span>().<span style="color:#50fa7b">__init__</span>(args)
        
    def <span style="color:#50fa7b">items</span>(self):
        <span style="color:#f1fa8c">&#39;&#39;&#39;Alternate utility to `enumerate` on the instance&#39;&#39;&#39;</span>
        <span style="color:#ff79c6">for</span> i, item <span style="color:#ff79c6">in</span> <span style="color:#50fa7b">enumerate</span>(self, start<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>):
            yield i, item

</code></pre></div><p>Now, by the grace of Duck Typing, we can use the <code>tabulate_mapping</code> function with instances of <code>MyList</code> class. However, what if we do not want malicious objects use our code this way. We all know about SQL Injection. It&rsquo;s about time we become aware of our privacy.</p>
<h2 id="the-curious-case-of-input-validation">
  The Curious Case of Input Validation
  <a class="heading-link" href="#the-curious-case-of-input-validation">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>In the function <code>tabulate_mapping</code>, observe that we have not written any code for validating the inputs. With Duck Typing in the fray, it is important to understand the need of a guideline on validating inputs.</p>
<p>Programmers coming from a background of a statically typed background would be inclined to perform <em>static</em> type checks on the object. As we have seen, strict type check can be severely restrictive to the point where the developers miss out on the cool features Python has to offer.
i.e <strong>Too much of <code>isinstance</code> and <code>hasattr</code> works but it is neither fun nor Pythonic!</strong></p>
<p>We will perform different kinds of input validation for the <code>tabulate_mapping</code> function based on the requirements:</p>
<ol>
<li>If we want the <code>tabulate_mapping</code> to be generic utility which can work on any <code>mapping</code> object with <code>items</code> and iterable <code>headers</code>.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-def" data-lang="def">        
        <span style="color:#ff79c6">#</span> Validate headers
        try:
            headers_iter <span style="color:#ff79c6">=</span> iter(headers)
        except TypeError as e:
            raise ValueError(<span style="color:#f1fa8c">&#39;headers needs to be an iterable.&#39;</span>)

        <span style="color:#ff79c6">#</span> Validate mapping
         try:
             mapping_items <span style="color:#ff79c6">=</span> mapping.items()
         except AttributeError as e:
             raise ValueError(<span style="color:#f1fa8c">&#39;mapping should have an items method.&#39;</span>)

        heading <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;&#39;</span>
        
         for header in headers_iter:
             heading <span style="color:#ff79c6">+=</span> <span style="color:#f1fa8c">&#39;{:&gt;15}&#39;</span>.format(header) <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39; |&#39;</span>

         print(heading)
         print(<span style="color:#f1fa8c">&#39;-&#39;</span><span style="color:#ff79c6">*</span>len(heading))
         
         for k, v in mapping_items:
             print(<span style="color:#f1fa8c">&#39;{:&gt;15} |{:&gt;15} |&#39;</span>.format(k, v))

</code></pre></div><ol start="2">
<li>If we want to restrict the <code>mapping</code> object to an instance of a subclass of the built-in <code>dict</code> and the <code>headers</code> are specified to be a <code>list</code> object:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-def" data-lang="def">        
        <span style="color:#ff79c6">#</span> Validate headers
        if not isinstance(headers, list)
            raise ValueError(<span style="color:#f1fa8c">&#39;headers needs to be a list object.&#39;</span>)

        <span style="color:#ff79c6">#</span> Validate mapping
        if not isinstance(mapping, dict):
            raise ValueError(<span style="color:#f1fa8c">&#39;mapping needs to be a dict object.&#39;</span>)
     
        heading <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;&#39;</span>
        
         for header in headers_iter:
             heading <span style="color:#ff79c6">+=</span> <span style="color:#f1fa8c">&#39;{:&gt;15}&#39;</span>.format(header) <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39; |&#39;</span>

         print(heading)
         print(<span style="color:#f1fa8c">&#39;-&#39;</span><span style="color:#ff79c6">*</span>len(heading))
         
         for k, v in mapping_items:
             print(<span style="color:#f1fa8c">&#39;{:&gt;15} |{:&gt;15} |&#39;</span>.format(k, v))

</code></pre></div><h1 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h1>
<blockquote>
<p>Whenever writing Python, we need to clearly define the allowed interfaces that can be used in place of an object rather than on the basis of classes the object.</p>
</blockquote>
<p>There is no distinction between the <em>right</em> way and the <em>wrong</em> way when it comes to dealing with objects in Python. The most Pythonic code at a given situation depends entirely on the requirements of the user and the practicality of the use cases. The consideration of Python&rsquo;s Data Model and duck typing can help one write clearer, readable and Pythonic code.</p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2016 -
        
        2021
         KSHITIJ SARAOGI 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
    </section>
  </footer>


    </main>

    
      
      <script src="https://kshitij10496.github.io/js/coder.min.03b17769f4f91ae35667e1f2a1ca8c16f50562576cf90ff32b3179926914daa5.js" integrity="sha256-A7F3afT5GuNWZ&#43;HyocqMFvUFYlds&#43;Q/zKzF5kmkU2qU="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
